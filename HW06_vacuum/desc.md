## Настройка autovacuum с учетом оптимальной производительности

### Цель
- запустить нагрузочный тест pgbench с профилем нагрузки DWH  
- настроить параметры autovacuum для достижения максимального уровня устойчивой производительности


#### создать GCE инстанс типа e2-medium и standard disk 10GB
#### установить на него PostgreSQL 13 с дефолтными настройками

#### применить параметры настройки PostgreSQL из прикрепленного к материалам занятия файла

- sudo nano /etc/postgresql/13/main/postgresql.conf

#### выполнить pgbench -i postgres -U postgres

- Переключила аутентификацию на md5. у postgres пароль p123
- Установила

#### запустить pgbench -c8 -P 60 -T 1200 -U postgres postgres

- запустила на 20 минут работы

#### дать отработать до конца
#### зафиксировать среднее значение tps в последней ⅙ части работы
#### а дальше настроить autovacuum максимально эффективно

- 1 запуск с дефолтными настройками;  
- 2 запуск с настройками из лекции;  
- 3 запуск с отключенным автовакуумом; - Это самый худший результат. Из за накопления мертвых строк запросы выполняются очень медленно.
- 4 настройки из лекции, но autovacuum_naptime = 1s;
- 5 autovacuum_max_workers = 5; autovacuum_naptime = 30s; autovacuum_vacuum_threshold = 50
- 6 настройки из лекции, но autovacuum_vacuum_scale_factor = 0.03 

#### так чтобы получить максимально ровное значение tps на горизонте часа

- получается что на данной БД самые оптимальные настройки autovacuum - настройки по умолчанию. 
  На продакшене врядли это подойдет и читая материалы я поняла что на большие либо часто изменяемые
  таблицы автовакуум придется настраивать индивидиуально.